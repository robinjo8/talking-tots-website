
<!DOCTYPE html>
<html lang="sl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>TomiTalk</title>
    <meta name="description" content="Interaktivna aplikacija za izboljšanje govora otrok z igrami in vajami" />
    <meta name="author" content="TomiTalk" />
    
    <!-- Preconnect to critical origins for faster loading -->
    <link rel="preconnect" href="https://ecmtctwovkheohqwahvt.supabase.co" crossorigin />
    <link rel="dns-prefetch" href="https://ecmtctwovkheohqwahvt.supabase.co" />
    
    <!-- Preload critical LCP image -->
    <link rel="preload" as="image" href="https://ecmtctwovkheohqwahvt.supabase.co/storage/v1/object/public/zmajcki/Zmajcek_0.png" fetchpriority="high" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- PWA Theme Colors -->
    <meta name="theme-color" content="#4CAF50" />
    <meta name="msapplication-TileColor" content="#4CAF50" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    
    <!-- Apple PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="TomiTalk" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png?v=zmajcek7" />
    
    <!-- iOS Splash Screens - White background to hide orange icon -->
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" />
    
    <!-- Standard Favicon -->
    <link rel="icon" href="/icons/icon-192x192.png?v=zmajcek7" type="image/png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-72x72.png?v=zmajcek7" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-72x72.png?v=zmajcek7" />
    <link rel="shortcut icon" href="/icons/icon-192x192.png?v=zmajcek7" type="image/png" />
    
    <!-- Mobile-specific optimizations -->
    <meta name="format-detection" content="telephone=no" />

    <meta property="og:title" content="TomiTalk" />
    <meta property="og:description" content="Interaktivna aplikacija za izboljšanje govora otrok z igrami in vajami" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/icons/icon-512x512.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TomiTalk" />
    <meta name="twitter:description" content="Interaktivna aplikacija za izboljšanje govora otrok z igrami in vajami" />
    <meta name="twitter:image" content="/icons/icon-512x512.png" />
    
    <!-- Google Identity Services SDK for One Tap -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
  </head>

  <body>
    <div id="root">
      <!-- Loading fallback - shown while React loads -->
      <div id="loading-fallback" style="display:flex;align-items:center;justify-content:center;height:100vh;font-family:system-ui;background:#f5f5f5">
        <div style="text-align:center">
          <div style="width:40px;height:40px;border:3px solid #4CAF50;border-radius:50%;border-top-color:transparent;animation:spin 1s linear infinite;margin:0 auto"></div>
          <p style="color:#666;margin-top:16px">Nalaganje...</p>
        </div>
      </div>
      <style>@keyframes spin{to{transform:rotate(360deg)}}</style>
    </div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- PWA Service Worker Registration - Minimal ES5 Recovery -->
    <script>
      (function() {
        if (!('serviceWorker' in navigator)) return;
        
        // Recovery: if page doesn't render in 5s, force clear everything
        setTimeout(function() {
          var fallback = document.getElementById('loading-fallback');
          if (fallback) {
            console.log('[Recovery] Clearing stale cache...');
            if (window.caches) {
              caches.keys().then(function(names) {
                names.forEach(function(name) { caches.delete(name); });
              });
            }
            navigator.serviceWorker.getRegistrations().then(function(regs) {
              regs.forEach(function(reg) { reg.unregister(); });
            });
            setTimeout(function() { location.reload(true); }, 300);
          }
        }, 5000);
        
        // Register SW
        navigator.serviceWorker.register('/sw.js').catch(function(err) {
          console.log('SW registration failed:', err);
        });
      })();
    </script>
  </body>
</html>
